{% extends 'base.html' %}

{% block links %}
    <link rel="stylesheet" href="{{ url_for('test_pass.static', filename = 'css/change_tests.css') }}">
{% endblock links %}

{% block content %}

    <form action="" method="post" id="del_form">
        <input type="hidden" name="check_post" value="del_image">
    </form>

    <div class="save-photos">
        <div class="programin-photo" data-programing="{{ url_for('test_pass.static', filename = 'images/programmer_image.png') }}"></div>
        <div class="math-photo" data-math="{{ url_for('test_pass.static', filename = 'images/math_picture.png') }}"></div>
        <div class="chemistry-photo" data-chemistry="{{ url_for('test_pass.static', filename = 'images/chemistry_picture.png') }}"></div>
        <div class="english-photo" data-english="{{ url_for('test_pass.static', filename = 'images/english_picture.png') }}"></div>
        <div class="history-photo" data-history="{{ url_for('test_pass.static', filename = 'images/history_picture.png') }}"></div>
        <div class="physics-photo" data-physics="{{ url_for('test_pass.static', filename = 'images/physics.png') }}"></div>
        <div class="another-photo" data-another="{{ url_for('test_pass.static', filename = 'images/cover.png') }}"></div>
    </div>

    <img class="back1" src="{{ url_for('test_pass.static', filename='images/back1.png') }}" alt="">
    <img class="back2" src="{{ url_for('test_pass.static', filename='images/back2.png') }}" alt="">
    
    <div class="modal-backdrop">
        <div class="modal-image">
            <div class="top-floor">
                <img src="{{ url_for('test_pass.static', filename='images/add.svg') }}" alt="icon" class="example_image">
                <p class="add_text" onclick="openModal()">Додати зображення</p>
            </div>
            <div class="load_text">
                <button class="load_button" type="button">
                    
                    <form action="" method="post" id = "image_form" enctype="multipart/form-data">
                        <input class="input_file" id="image" name="image" type="file" accept="image/*" onchange="previewImage(event);">
                        <input type="hidden" name="check_post" value="image">
                        <label for="image" style="display: flex; flex-direction:row; margin-left:1vw;">
                            <img src="{{ url_for('test_pass.static', filename='images/upload.png') }}" alt="icon" class="load_image">
                            Завантажити 
                        </label>
                    </form>
                </button>
            </div>
            <div class="show_image">
                <div class="outline-image">
                    <img src="{{ url_for('test_pass.static', filename='images/add.svg') }}" alt="icon" class="example_image">
                    <img id="show_image_test" src="{{ url_for('test_pass.static', filename = 'images/invisible.png') }}" alt="">
                </div>
            </div>
            <div class="buttom-floor">
                <button class="apply-image delete-photo" type="button" onclick="DeleteImage();">видалити фото</button>
                <button class="back-button" type="button" onclick="closeModal();">назад</button>
                <button class="apply-image" type="button" onclick="sumbmitIMage()">застосувати зображення </button>
            </div>
        </div>
    </div>
    
    <div class="information-test">
        <form action="" method="post" class="change-information">
            <div class="text-information">
                <p>Інформація про тест</p>
            </div>
            <div class="category-test">
                <p>категорія: <span id="category">{{ test.category }}</span></p>
                <div class="type">
                    <p class="type-p timer-p" id="time"><span class="text choose-category-test"></span><img sty class="show_more_velocity" src="{{ url_for('test_pass.static', filename='images/show_more.svg') }}" alt=""></p>
                    <input id="newCatInput" type="hidden" name="new_category">
                    <ul id="timeList" class="hidden-list">
                        <li data-category="математика">математика</li>
                        <li data-category="англійська">англійська</li>
                        <li data-category="програмування">програмування</li>
                        <li data-category="історія">історія</li>
                        <li data-category="фізика">фізика</li>
                        <li data-category="хімія">хімія</li>
                        <li data-category="інше" class="last-li">інше</li>
                    </ul>
                    
                </div>
            </div>
            <div class="theme-test">
                <p>тема: <span id="testTitle">{{ test.title_test }}</span></p>
                <input id="newTitle" type="text" name="new_name" placeholder="Нова назва"  class="invisible">
                <button type="button" id="changeTitleBtn">Редагувати</button>
            </div>
            <div class="creator-test">
                <p>творець: <span>@vova</span></p>
            </div>
            <div class="count-questions">
                <p>кількість питаннь: <span>12</span></p>
            </div>
            <div class="settings-buttons">
                <button class="save-changed">Зберегти зміни</button>
                <button class="delete-test" value="{{ test.id }}" name="delete-id">Видалити тест повністтю</button>
            </div>
        </form>
        <div class="change-image">
            <div class="outline-image">
                {% if cash_image != 'default' %}
                    <img src="{{ url_for('edit_avatar.static', filename='images/edit_avatar/' + test.user.email + '/cash_test/' + cash_image) }}" alt="cash_image" class="test-cover">
                {% elif cash_image == 'default' %}
                    <img src="" alt="" class="test-cover">
                {% endif %}
            </div>
            <button onclick="openModal()">
                <img class="add-image test-cover" src="{{ url_for('test_pass.static', filename='images/image.png') }}" alt="">
                Змінити фото
            </button>
        </div>
    </div>
    <div class="outline">
        <p>Перелік питаннь: </p>
    </div>
    <div class="list-questions">

        {% for this_question in question_list %}

            {% if this_question.question|length >= 1 %}
    
                <div class="space-div">
                    <div class="head">
                        <img class="head-bg" src="{{ url_for('test_pass.static', filename='images/header.svg') }}" alt="">
                        <button class="del"><img src="{{ url_for('test_pass.static', filename='images/del.svg') }}" alt=""></button>
                        <p>{{ this_question.question }}</p>
                        <a class="btn" href="/test/change_question/{{ this_question.pk }}?test_pk={{test.id}}">Редагувати</a>
                    </div>
                    <span class="answers">
                        {% for answer in this_question.answers %}
                            <div class="variant">
                                <div class="circle"></div>
                                <p class="answer">{% if answer != "image?#$?image" %}{{ answer }}{% else %}Зображення{% endif %}</p>
                            </div>
                        {% endfor %}
                    </span>
                </div>

            {% endif %}

        {% endfor %}
    </div>
    <!-- {% if message %}
        <p>{{ message }}</p>
    {% endif %} -->
    
{% endblock %}

{% block scripts %}
    <script src="{{ url_for('test_pass.static', filename='js/jquery-3.7.1.min.js') }}"></script>
    <script src="{{ url_for('test_pass.static', filename='js/ajaxDeleteTest.js') }}"></script>
    <script src="{{ url_for('test_pass.static', filename='js/test_category.js') }}"></script>
    <script src="{{ url_for('test_pass.static', filename='js/modalimage.js') }}"></script>
{% endblock %}
